"use strict";(self.webpackChunkmovies_project=self.webpackChunkmovies_project||[]).push([[907],{1907:(V,m,a)=>{a.r(m),a.d(m,{AuthModule:()=>N});var g=a(6895),c=a(1779),u=a(5861),s=a(4006),t=a(4650),f=a(4672),p=a(3162),l=a(9549),_=a(284),d=a(1572);function x(e,i){1&e&&t._UZ(0,"mat-progress-bar",15)}function h(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"You must type a name"),t.qZA())}function w(e,i){if(1&e&&(t.TgZ(0,"div",6)(1,"mat-form-field")(2,"mat-label"),t._uU(3,"Your name"),t.qZA(),t._UZ(4,"input",16),t.YNc(5,h,2,0,"mat-error",14),t.qZA(),t._UZ(6,"p"),t.qZA()),2&e){const n=t.oxw(2);t.xp6(5),t.Q6J("ngIf",n.form.controls.name.hasError("required")&&n.form.controls.name.touched)}}function v(e,i){1&e&&t._UZ(0,"mat-spinner",19)}function T(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.login())}),t.YNc(1,v,1,0,"mat-spinner",18),t._uU(2," Login"),t.qZA()}if(2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.isLoading)}}function Z(e,i){1&e&&t._UZ(0,"mat-spinner",19)}function C(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.register())}),t.YNc(1,Z,1,0,"mat-spinner",18),t._uU(2," Sign up"),t.qZA()}if(2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.isLoading)}}function P(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"span"),t._uU(1,"Not a member? "),t.TgZ(2,"a",20),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.changeFormState())}),t._uU(3,"Sign Up"),t.qZA()()}}function M(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"span"),t._uU(1,"Already have an account? "),t.TgZ(2,"a",20),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.changeFormState())}),t._uU(3,"Sign in"),t.qZA()()}}function E(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",2)(1,"h1",3),t._uU(2,"Sign in"),t.qZA(),t.TgZ(3,"form",4),t.YNc(4,x,1,0,"mat-progress-bar",5),t.TgZ(5,"div",6)(6,"mat-form-field")(7,"mat-label"),t._uU(8,"Your Email"),t.qZA(),t.TgZ(9,"input",7),t.NdJ("input",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.emailErrors="")}),t.qZA(),t.TgZ(10,"mat-error"),t._uU(11),t.qZA()()(),t.YNc(12,w,7,1,"div",8),t.TgZ(13,"div",6)(14,"mat-form-field")(15,"mat-label"),t._uU(16,"Your password"),t.qZA(),t.TgZ(17,"input",9,10),t.NdJ("input",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.form.controls.password)}),t.qZA(),t.TgZ(19,"mat-error"),t._uU(20),t.qZA()()(),t.TgZ(21,"div",11)(22,"span",12),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.setForgotPasswordTemplate())}),t._uU(23,"Forgot your Password?"),t.qZA(),t.YNc(24,T,3,1,"button",13),t.YNc(25,C,3,1,"button",13),t.YNc(26,P,4,0,"span",14),t.YNc(27,M,4,0,"span",14),t.qZA(),t.TgZ(28,"mat-error"),t._uU(29),t.qZA()()()}if(2&e){const n=t.oxw();t.xp6(3),t.Q6J("formGroup",n.form),t.xp6(1),t.Q6J("ngIf",n.isLoading),t.xp6(7),t.Oqu(n.emailErrors),t.xp6(1),t.Q6J("ngIf","register"==n.formState),t.xp6(8),t.Oqu(n.passwordErrors),t.xp6(4),t.Q6J("ngIf","login"==n.formState),t.xp6(1),t.Q6J("ngIf","register"==n.formState),t.xp6(1),t.Q6J("ngIf","login"==n.formState),t.xp6(1),t.Q6J("ngIf","register"==n.formState),t.xp6(2),t.Oqu(n.genericErrors)}}function y(e,i){1&e&&(t.TgZ(0,"span",29),t._uU(1,"We sent you an email, check your inbox to reset your password"),t.qZA())}function L(e,i){1&e&&t._UZ(0,"mat-spinner",19)}function O(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.sendPasswordEmail())}),t.YNc(1,L,1,0,"mat-spinner",18),t._uU(2," Send email "),t.qZA()}if(2&e){const n=t.oxw(2);t.Q6J("disabled",n.isLoading),t.xp6(1),t.Q6J("ngIf",n.isLoading)}}function A(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",21)(1,"h1",22),t._uU(2,"Forgot your password?"),t.qZA(),t.TgZ(3,"h4",23),t._uU(4,"Enter your email and we'll send you an link to reset your password"),t.qZA(),t.TgZ(5,"mat-form-field")(6,"mat-label"),t._uU(7,"Your email"),t.qZA(),t._UZ(8,"input",24),t.TgZ(9,"mat-error"),t._uU(10),t.qZA()(),t.YNc(11,y,2,0,"span",25),t.YNc(12,O,3,2,"button",26),t.TgZ(13,"span",27),t._uU(14,"Already have an account? "),t.TgZ(15,"a",28),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.forgotPasswordTemplate=!1)}),t._uU(16,"Sign in"),t.qZA()()()}if(2&e){const n=t.oxw();t.xp6(8),t.Q6J("formControl",n.forgotPasswordControl),t.xp6(2),t.Oqu(n.forgotPasswordEmailErrors),t.xp6(1),t.Q6J("ngIf",n.emailSent),t.xp6(1),t.Q6J("ngIf",!n.emailSent)}}const b=[{path:"",component:(()=>{class e{constructor(n,o,r){this.authService=n,this.fb=o,this.router=r,this.formState="login"}ngOnInit(){this.form=this.fb.group({name:["",[s.kI.required]],email:[""],password:[""]}),this.forgotPasswordControl=new s.NI("",s.kI.email)}changeFormState(){this.formState="register"===this.formState?"login":"register",this.clearFormValues()}login(){var n=this;return(0,u.Z)(function*(){n.isLoading=!0,n.clearFormErrors();const o=yield n.authService.login(n.getUserData());"errorType"in o?n.treatErrors(o.errorType,o.message):o.user&&n.router.navigate(["/home"]),n.isLoading=!1})()}register(){var n=this;return(0,u.Z)(function*(){if(n.isLoading=!0,n.clearFormErrors(),!n.checkEmptyName())return void(n.isLoading=!1);const o=yield n.authService.registerUser(n.getUserData());"errorType"in o?n.treatErrors(o.errorType,o.message):n.formState="login",n.isLoading=!1})()}getUserData(){const n=this.form.get("name")?.value,o=this.form.get("email")?.value,r=this.form.get("password")?.value;return{name:n,email:o,password:r}}clearFormValues(){Object.keys(this.form.controls).forEach(n=>{this.form.controls[n].setValue("")})}clearFormErrors(){this.emailErrors="",this.passwordErrors="",this.genericErrors=""}treatErrors(n,o){"email"===n?(this.emailErrors=o,this.form.controls.email.setErrors({incorrect:!0})):"password"===n?(this.passwordErrors=o,this.form.controls.password.setErrors({incorrect:!0})):this.genericErrors=o}checkEmptyName(){return!!this.form.controls.name.value}setForgotPasswordTemplate(){this.forgotPasswordTemplate=!0}sendPasswordEmail(){if(!this.forgotPasswordControl.value)return this.forgotPasswordEmailErrors="You need to enter an email",void this.forgotPasswordControl.setErrors({incorrect:!0});this.isLoading=!0,this.authService.sendPasswordResetEmail(this.forgotPasswordControl.value).then(n=>{n?n.hasError&&(this.forgotPasswordEmailErrors=n.error,this.forgotPasswordControl.setErrors({incorrect:!0})):this.emailSent=!0}).finally(()=>this.isLoading=!1)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.e),t.Y36(s.qu),t.Y36(c.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:3,vars:2,consts:[["class","login-container",4,"ngIf","ngIfElse"],["forgotPassword",""],[1,"login-container"],[1,"text-center","text-white"],["novalidate","",3,"formGroup"],["mode","indeterminate",4,"ngIf"],[1,"field-wrapper"],["matInput","","formControlName","email",3,"input"],["class","field-wrapper",4,"ngIf"],["type","password","matInput","","formControlName","password",3,"input"],["pass",""],[1,"actions"],[1,"w-fit","cursor-pointer","hover:underline",3,"click"],["class","d-flex items-center justify-center gap-4 transition-all",3,"click",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],["matInput","","formControlName","name"],[1,"d-flex","items-center","justify-center","gap-4","transition-all",3,"click"],["class","w-6 h-6 mat-spinner",4,"ngIf"],[1,"w-6","h-6","mat-spinner"],[1,"cursor-pointer","underline",3,"click"],[1,"login-container","pt-8"],[1,"text-white","mt-2"],[1,"text-white","text-sm"],["type","text","matInput","",3,"formControl"],["class","text-white text-[14px]",4,"ngIf"],["class","mt-4 bg-[#203A43] transition-all w-[80%] mx-auto py-3 gap-4 rounded-[30px] text-xl text-white flex items-center justify-center",3,"disabled","click",4,"ngIf"],[1,"mt-4","text-white"],[1,"text-[#3A6073]","cursor-pointer","underline",3,"click"],[1,"text-white","text-[14px]"],[1,"mt-4","bg-[#203A43]","transition-all","w-[80%]","mx-auto","py-3","gap-4","rounded-[30px]","text-xl","text-white","flex","items-center","justify-center",3,"disabled","click"]],template:function(n,o){if(1&n&&(t.YNc(0,E,30,10,"div",0),t.YNc(1,A,17,4,"ng-template",null,1,t.W1O)),2&n){const r=t.MAs(2);t.Q6J("ngIf",!o.forgotPasswordTemplate)("ngIfElse",r)}},dependencies:[g.O5,p.pW,l.KE,l.hX,l.TO,_.Nt,d.Ou,s._Y,s.Fj,s.JJ,s.JL,s.oH,s.sg,s.u],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;margin:0 auto;margin-block:8em;padding:4em 3em;border-radius:10px;background-color:#0f2027;width:min(90%,600px)}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;justify-content:center;align-items:center}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red!important;padding:0}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#203a43!important;color:#e6e6e6;font-weight:500;letter-spacing:.4px;padding-block:1em;margin:0 auto;width:80%;border-radius:30px;font-size:1.2rem;box-shadow:#00000029 0 1px 4px}.login-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9;transition:.4s ease!important}[_nghost-%COMP%]     mat-form-field .mdc-text-field--filled{background-color:transparent!important}.actions[_ngcontent-%COMP%]{display:flex;width:100%;gap:1.5em;flex-direction:column}.actions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;padding-left:1em}.actions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3a6073!important;margin-left:.5em}mat-form-field[_ngcontent-%COMP%]{background-color:transparent;box-shadow:#0000000d 0 6px 24px,#00000014 0 0 0 1px!important;width:100%;color:#fff!important}mat-form-field[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#e6e6e6!important}.mat-spinner[_ngcontent-%COMP%]  circle{stroke:#fff}"]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(b),c.Bz]}),e})();var I=a(1933);let N=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,I.q,s.UX,U]}),e})()}}]);
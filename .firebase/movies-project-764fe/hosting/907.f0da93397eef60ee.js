"use strict";(self.webpackChunkmovies_project=self.webpackChunkmovies_project||[]).push([[907],{1907:(q,f,a)=>{a.r(f),a.d(f,{AuthModule:()=>F});var m=a(6895),g=a(1779),u=a(5861),s=a(4006),c=a(7340),d=a(2289),t=a(4650),x=a(4672),_=a(7009),w=a(3162),p=a(9549),h=a(284),C=a(1572);function v(e,i){1&e&&(t.TgZ(0,"div",4),t._UZ(1,"img",5),t.qZA())}function M(e,i){1&e&&t._UZ(0,"mat-progress-bar",23)}function P(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"You must type a name"),t.qZA())}function O(e,i){if(1&e&&(t.TgZ(0,"div",15)(1,"mat-form-field")(2,"mat-label",12),t._uU(3,"Your name"),t.qZA(),t._UZ(4,"input",24),t.YNc(5,P,2,0,"mat-error",22),t.qZA()()),2&e){const n=t.oxw(2);t.Q6J("@slideIn",n.formState),t.xp6(5),t.Q6J("ngIf",n.form.controls.name.hasError("required")&&n.form.controls.name.touched)}}function Z(e,i){1&e&&t._UZ(0,"mat-spinner",27)}function T(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.login())}),t.YNc(1,Z,1,0,"mat-spinner",26),t._uU(2," Login"),t.qZA()}if(2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.isLoading)}}function b(e,i){1&e&&t._UZ(0,"mat-spinner",27)}function y(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.register())}),t.YNc(1,b,1,0,"mat-spinner",26),t._uU(2," Sign up"),t.qZA()}if(2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.isLoading)}}function E(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"span",28),t._uU(1,"Not a member? "),t.TgZ(2,"a",29),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.changeFormState())}),t._uU(3,"Sign Up"),t.qZA()()}}function L(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"span",28),t._uU(1,"Already have an account? "),t.TgZ(2,"a",29),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.changeFormState())}),t._uU(3,"Sign in"),t.qZA()()}}function A(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Oqu(n.genericErrors)}}function I(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"form",8)(3,"h1",9),t._uU(4,"Sign in"),t.qZA(),t.YNc(5,M,1,0,"mat-progress-bar",10),t.TgZ(6,"div",11)(7,"mat-form-field")(8,"mat-label",12),t._uU(9,"Your Email"),t.qZA(),t.TgZ(10,"input",13),t.NdJ("input",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.emailErrors="")}),t.qZA(),t.TgZ(11,"mat-error"),t._uU(12),t.qZA()()(),t.YNc(13,O,6,2,"div",14),t.TgZ(14,"div",15)(15,"mat-form-field")(16,"mat-label",12),t._uU(17,"Your password"),t.qZA(),t.TgZ(18,"input",16,17),t.NdJ("input",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.form.controls.password)}),t.qZA(),t.TgZ(20,"mat-error"),t._uU(21),t.qZA()()(),t.TgZ(22,"span",18),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.setForgotPasswordTemplate())}),t._uU(23,"Forgot your Password?"),t.qZA(),t.TgZ(24,"div",19),t.YNc(25,T,3,1,"button",20),t.YNc(26,y,3,1,"button",20),t.YNc(27,E,4,0,"span",21),t.YNc(28,L,4,0,"span",21),t.qZA(),t.YNc(29,A,2,1,"mat-error",22),t.qZA()()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("@slideIn",n.formState),t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(3),t.Q6J("ngIf",n.isLoading),t.xp6(7),t.Oqu(n.emailErrors),t.xp6(1),t.Q6J("ngIf","register"==n.formState),t.xp6(8),t.Oqu(n.passwordErrors),t.xp6(4),t.Q6J("ngIf","login"==n.formState),t.xp6(1),t.Q6J("ngIf","register"==n.formState),t.xp6(1),t.Q6J("ngIf","login"==n.formState),t.xp6(1),t.Q6J("ngIf","register"==n.formState),t.xp6(1),t.Q6J("ngIf",n.genericErrors)}}function U(e,i){1&e&&(t.TgZ(0,"span",38),t._uU(1,"We sent you an email, check your inbox to reset your password"),t.qZA())}function J(e,i){1&e&&t._UZ(0,"mat-spinner",27)}function N(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(n);const r=t.oxw(2);return t.KtG(r.sendPasswordEmail())}),t.YNc(1,J,1,0,"mat-spinner",26),t._uU(2," Send email "),t.qZA()}if(2&e){const n=t.oxw(2);t.Q6J("disabled",n.isLoading),t.xp6(1),t.Q6J("ngIf",n.isLoading)}}function S(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"div",30)(3,"div")(4,"h1",31),t._uU(5,"Forgot your password?"),t.qZA(),t.TgZ(6,"h4",32),t._uU(7,"Enter your email and we'll send you an link to reset your password"),t.qZA()(),t.TgZ(8,"mat-form-field")(9,"mat-label"),t._uU(10,"Your email"),t.qZA(),t._UZ(11,"input",33),t.TgZ(12,"mat-error"),t._uU(13),t.qZA()(),t.YNc(14,U,2,0,"span",34),t.TgZ(15,"div",35),t.YNc(16,N,3,2,"button",36),t.TgZ(17,"span",9),t._uU(18,"Already have an account? "),t.TgZ(19,"a",37),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.forgotPasswordTemplate=!1)}),t._uU(20,"Sign in"),t.qZA()()()()()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("@slideIn",n.formState),t.xp6(10),t.Q6J("formControl",n.forgotPasswordControl),t.xp6(2),t.Oqu(n.forgotPasswordEmailErrors),t.xp6(1),t.Q6J("ngIf",n.emailSent),t.xp6(2),t.Q6J("ngIf",!n.emailSent)}}const k=[{path:"",component:(()=>{class e{constructor(n,o,r,l,Q){this.authService=n,this.fb=o,this.router=r,this.matSnackBarController=l,this.breakpointObserver=Q,this.formState="login",this.isMobile$=this.breakpointObserver.observe(d.u3.Handset)}ngOnInit(){this.form=this.fb.group({name:["",[s.kI.required]],email:[""],password:[""]}),this.forgotPasswordControl=new s.NI("",s.kI.email)}changeFormState(){this.formState="register"===this.formState?"login":"register",this.form.reset()}login(){var n=this;return(0,u.Z)(function*(){n.isLoading=!0,n.clearFormErrors();const o=yield n.authService.login(n.getUserData());"errorType"in o?n.treatErrors(o.errorType,o.message):o.user&&(n.matSnackBarController.open("Logged in succesfully","",{duration:1500,panelClass:"custom-snackbar"}),n.router.navigate(["/home"])),n.isLoading=!1})()}register(){var n=this;return(0,u.Z)(function*(){if(n.isLoading=!0,n.clearFormErrors(),!n.checkEmptyName())return void(n.isLoading=!1);const o=yield n.authService.registerUser(n.getUserData());"errorType"in o?n.treatErrors(o.errorType,o.message):(n.router.navigate(["home"]),n.matSnackBarController.open("Account created succesfully","",{duration:1500,panelClass:"custom-snackbar"})),n.isLoading=!1})()}getUserData(){const n=this.form.get("name")?.value,o=this.form.get("email")?.value,r=this.form.get("password")?.value;return{name:n,email:o,password:r}}clearFormErrors(){this.emailErrors="",this.passwordErrors="",this.genericErrors=""}treatErrors(n,o){"email"===n?(this.emailErrors=o,this.form.controls.email.setErrors({incorrect:!0})):"password"===n?(this.passwordErrors=o,this.form.controls.password.setErrors({incorrect:!0})):this.genericErrors=o}checkEmptyName(){return!!this.form.controls.name.value}setForgotPasswordTemplate(){this.forgotPasswordTemplate=!0}sendPasswordEmail(){if(!this.forgotPasswordControl.value)return this.forgotPasswordEmailErrors="You need to enter an email",void this.forgotPasswordControl.setErrors({incorrect:!0});this.isLoading=!0,this.authService.sendPasswordResetEmail(this.forgotPasswordControl.value).then(n=>{n?n.hasError&&(this.forgotPasswordEmailErrors=n.error,this.forgotPasswordControl.setErrors({incorrect:!0})):this.emailSent=!0}).finally(()=>this.isLoading=!1)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(x.e),t.Y36(s.qu),t.Y36(g.F0),t.Y36(_.ux),t.Y36(d.Yg))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:6,vars:5,consts:[[1,"login-container"],["class","poster-wrapper",4,"ngIf"],["class","form-wrapper",4,"ngIf","ngIfElse"],["forgotPassword",""],[1,"poster-wrapper"],["src","../../../../../assets/poster-login.jpg","alt",""],[1,"form-wrapper"],[1,"wrapper","h-full"],["novalidate","",3,"formGroup"],[1,"text-white"],["mode","indeterminate",4,"ngIf"],[1,"field-wrapper"],[1,"text-base"],["matInput","","formControlName","email",3,"input"],["class","field-wrapper mt-3",4,"ngIf"],[1,"field-wrapper","mt-3"],["type","password","matInput","","formControlName","password",3,"input"],["pass",""],[1,"mt-2","text-white","text-xs","self-start","w-fit","cursor-pointer","hover:underline",3,"click"],[1,"actions"],["class","d-flex items-center justify-center gap-4 transition-all",3,"click",4,"ngIf"],["class","text-center",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],["matInput","","formControlName","name"],[1,"d-flex","items-center","justify-center","gap-4","transition-all",3,"click"],["class","w-6 h-6 mat-spinner",4,"ngIf"],[1,"w-6","h-6","mat-spinner"],[1,"text-center"],[1,"cursor-pointer","underline",3,"click"],[1,"forgot-password-wrapper","relative","h-full","d-flex","flex-col"],[1,"text-white","mt-2","mb-2"],[1,"text-white","text-[13px]"],["type","text","matInput","",3,"formControl"],["class","text-white text-[14px]",4,"ngIf"],[1,"d-flex","flex-col","gap-6","items-center","mt-auto"],["class","mt-4 bg-[#203A43] transition-all w-[80%] mx-auto py-3 gap-4 rounded-[30px] text-xl text-white flex items-center justify-center",3,"disabled","click",4,"ngIf"],[1,"text-[#3A6073]","cursor-pointer","underline",3,"click"],[1,"text-white","text-[14px]"],[1,"mt-4","bg-[#203A43]","transition-all","w-[80%]","mx-auto","py-3","gap-4","rounded-[30px]","text-xl","text-white","flex","items-center","justify-center",3,"disabled","click"]],template:function(n,o){if(1&n&&(t.TgZ(0,"div",0),t.YNc(1,v,2,0,"div",1),t.ALo(2,"async"),t.YNc(3,I,30,11,"div",2),t.qZA(),t.YNc(4,S,21,5,"ng-template",null,3,t.W1O)),2&n){const r=t.MAs(5);let l;t.xp6(1),t.Q6J("ngIf",!(null!=(l=t.lcZ(2,3,o.isMobile$))&&l.matches)),t.xp6(2),t.Q6J("ngIf",!o.forgotPasswordTemplate)("ngIfElse",r)}},dependencies:[m.O5,w.pW,p.KE,p.hX,p.TO,h.Nt,C.Ou,s._Y,s.Fj,s.JJ,s.JL,s.oH,s.sg,s.u,m.Ov],styles:[".login-container[_ngcontent-%COMP%]{width:min(90%,800px);display:flex;border-radius:12px;overflow:hidden;margin:0 auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.login-container[_ngcontent-%COMP%]   .poster-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:600px;max-height:500px}.login-container[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]{display:flex;overflow:hidden;transition:.2s ease;border-top-right-radius:12px;border-bottom-right-radius:12px;flex-direction:column;background-color:#0f2027;padding:2em;min-width:50%}@media (max-width: 500px){.login-container[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]{min-width:100%}}.login-container[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;flex-direction:column;justify-content:center;align-items:center}.login-container[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.login-container[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .field-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:red!important;padding:0}.login-container[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#203a43!important;color:#fff;font-weight:500;letter-spacing:.4px;padding-block:1em;margin:0 auto;width:80%;border-radius:30px;font-size:1.2rem;box-shadow:#00000029 0 1px 4px}.login-container[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.9;transition:.4s ease!important}@media (max-width: 500px){.login-container[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding-block:.9em!important}}.login-container[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;width:100%;gap:1.5em;flex-direction:column;margin-top:auto}.login-container[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;padding-left:1em}.login-container[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3a6073!important;margin-left:.5em}@media (max-width: 500px){.login-container[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:1.5em}}[_nghost-%COMP%]     mat-form-field .mdc-text-field--filled{background-color:transparent!important}[_nghost-%COMP%]     mat-form-field .mat-mdc-form-field-subscript-wrapper{height:0}[_nghost-%COMP%]     .mat-form-field-invalid .mat-mdc-form-field-subscript-wrapper{height:auto}mat-form-field[_ngcontent-%COMP%]{background-color:transparent;width:100%;color:#fff!important}mat-form-field[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#fff!important}.mat-spinner[_ngcontent-%COMP%]  circle{stroke:#fff}"],data:{animation:[(0,c.X$)("slideIn",[(0,c.eR)(":enter",[(0,c.oB)({opacity:0}),(0,c.jt)(".3s ease-out",(0,c.oB)({opacity:1}))]),(0,c.eR)(":leave",[(0,c.oB)({opacity:1}),(0,c.jt)(".3s ease-out",(0,c.oB)({opacity:0}))])])]}}),e})()}];let V=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.Bz.forChild(k),g.Bz]}),e})();var Y=a(1933);let F=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,Y.q,s.UX,V,_.ZX]}),e})()}}]);